# =============================================================================
# UI Configuration - Staging
# =============================================================================
# Frontend Next.js service configuration
#
# Usage: Copy to .env.ui.staging
#   cp .env.ui.staging.example .env.ui.staging
#
# =============================================================================
# IMPORTANT: Understanding NEXT_PUBLIC_* vs Server-only Variables
# =============================================================================
#
# NEXT_PUBLIC_* (Build-time):
#   - Baked into client bundle at BUILD time
#   - Visible to browser (anyone can see in page source)
#   - Safe for: App URLs, feature flags, cookie names, Sentry DSN
#   - NEVER put secrets here!
#
# Server-only (Runtime):
#   - Only available on Next.js server at RUNTIME
#   - Hidden from browser
#   - Safe for: Backend URLs, JWT secrets, API keys
#
# =============================================================================

VERSION=staging-latest

# -----------------------------------------------------------------------------
# Build-time Variables (NEXT_PUBLIC_*)
# These are passed as build args to Docker
# -----------------------------------------------------------------------------
NEXT_PUBLIC_APP_NAME=RediverIO
NEXT_PUBLIC_APP_DESCRIPTION=Continuous Threat Exposure Management Platform
NEXT_PUBLIC_APP_URL=http://localhost:3000
# Public API URL for agent configuration (used in UI to generate agent config)
# If not set, derived from NEXT_PUBLIC_APP_URL (app. -> api.)
NEXT_PUBLIC_API_BASE_URL=https://api.localhost
NEXT_PUBLIC_AUTH_PROVIDER=local
NEXT_PUBLIC_AUTH_COOKIE_NAME=auth_token
NEXT_PUBLIC_REFRESH_COOKIE_NAME=refresh_token
NEXT_PUBLIC_OAUTH_CALLBACK_URL=
NEXT_PUBLIC_SENTRY_DSN=

# Keycloak (only for oidc or hybrid auth)
# NEXT_PUBLIC_KEYCLOAK_URL=http://localhost:8180
# NEXT_PUBLIC_KEYCLOAK_REALM=rediver
# NEXT_PUBLIC_KEYCLOAK_CLIENT_ID=ui
# NEXT_PUBLIC_KEYCLOAK_REDIRECT_URI=http://localhost:3000/auth/callback

# -----------------------------------------------------------------------------
# Runtime Variables (Server-only)
# -----------------------------------------------------------------------------
# Internal backend URL - Next.js server proxies to this
# Browser CANNOT see this URL
BACKEND_API_URL=http://api:8080
API_TIMEOUT=30000

# Keycloak client secret (only for oidc or hybrid auth)
# KEYCLOAK_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# Set to true if using HTTPS
SECURE_COOKIES=false

# CRITICAL: Generate a random secret (min 32 characters)
# Generate with: openssl rand -hex 32
CSRF_SECRET=CHANGE_ME_generate_with_openssl_rand_hex_32

# -----------------------------------------------------------------------------
# Cookie Settings
# -----------------------------------------------------------------------------
COOKIE_MAX_AGE=604800
ENABLE_TOKEN_REFRESH=true
TOKEN_REFRESH_BEFORE_EXPIRY=300

# -----------------------------------------------------------------------------
# Ports
# -----------------------------------------------------------------------------
UI_PORT=3000
